{"ast":null,"code":"'use strict';\n\n// See http://www.robvanderwoude.com/escapechars.php\nvar metaCharsRegExp = /([()\\][%!^\"`<>&|;, *?])/g;\nfunction escapeCommand(arg) {\n  // Escape meta chars\n  arg = arg.replace(metaCharsRegExp, '^$1');\n  return arg;\n}\nfunction escapeArgument(arg, doubleEscapeMetaChars) {\n  // Convert to string\n  arg = \"\".concat(arg);\n\n  // Algorithm below is based on https://qntm.org/cmd\n\n  // Sequence of backslashes followed by a double quote:\n  // double up all the backslashes and escape the double quote\n  arg = arg.replace(/(\\\\*)\"/g, '$1$1\\\\\"');\n\n  // Sequence of backslashes followed by the end of the string\n  // (which will become a double quote later):\n  // double up all the backslashes\n  arg = arg.replace(/(\\\\*)$/, '$1$1');\n\n  // All other backslashes occur literally\n\n  // Quote the whole thing:\n  arg = \"\\\"\".concat(arg, \"\\\"\");\n\n  // Escape meta chars\n  arg = arg.replace(metaCharsRegExp, '^$1');\n\n  // Double escape meta chars if necessary\n  if (doubleEscapeMetaChars) {\n    arg = arg.replace(metaCharsRegExp, '^$1');\n  }\n  return arg;\n}\nmodule.exports.command = escapeCommand;\nmodule.exports.argument = escapeArgument;","map":null,"metadata":{},"sourceType":"script"}