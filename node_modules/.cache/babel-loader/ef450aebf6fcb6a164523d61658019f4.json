{"ast":null,"code":"'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\nvar YError = require('./yerror');\nvar previouslyVisitedConfigs = [];\nfunction checkForCircularExtends(cfgPath) {\n  if (previouslyVisitedConfigs.indexOf(cfgPath) > -1) {\n    throw new YError(\"Circular extended configurations: '\".concat(cfgPath, \"'.\"));\n  }\n}\nfunction getPathToDefaultConfig(cwd, pathToExtend) {\n  return path.resolve(cwd, pathToExtend);\n}\nfunction applyExtends(config, cwd) {\n  var defaultConfig = {};\n  if (config.hasOwnProperty('extends')) {\n    if (typeof config.extends !== 'string') return defaultConfig;\n    var isPath = /\\.json$/.test(config.extends);\n    var pathToDefault = null;\n    if (!isPath) {\n      try {\n        pathToDefault = require.resolve(config.extends);\n      } catch (err) {\n        // most likely this simply isn't a module.\n      }\n    } else {\n      pathToDefault = getPathToDefaultConfig(cwd, config.extends);\n    }\n    // maybe the module uses key for some other reason,\n    // err on side of caution.\n    if (!pathToDefault && !isPath) return config;\n    checkForCircularExtends(pathToDefault);\n    previouslyVisitedConfigs.push(pathToDefault);\n    defaultConfig = isPath ? JSON.parse(fs.readFileSync(pathToDefault, 'utf8')) : require(config.extends);\n    delete config.extends;\n    defaultConfig = applyExtends(defaultConfig, path.dirname(pathToDefault));\n  }\n  previouslyVisitedConfigs = [];\n  return Object.assign({}, defaultConfig, config);\n}\nmodule.exports = applyExtends;","map":null,"metadata":{},"sourceType":"script"}